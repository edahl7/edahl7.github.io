<!DOCTYPE html>
<html>
    <head>
      <title>A Leaflet map!</title>
      <link rel="stylesheet" href="leaflet.css" />
      <link rel="stylesheet" href="leaflet-slider.css"/>
      <link rel="stylesheet" href="leaflet-sidebar.css"/>
      <link rel="stylesheet" href="leaflet.dialog.css"/>
      
      <link rel="stylesheet" href="font-awesome.css"/>
      

      <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
      <script src="shp.js"></script>
      <script src="leaflet.shpfile.js"></script>
      <script src="catiline.js"></script>
      <script src ="leaflet-slider.js"></script>
      <script src ="leaflet-sidebar.js"></script>
      <script src ="Leaflet.Dialog.js"></script>
      <script src ="Leaflet.ajax.js"></script>
      
      

      <style>
      #mapId{ width: 800px; height: 800px; }
      </style>
    </head>
    <body>        
        <h1>OSU Enrollment</h1>
        <div id="mapId"></div>
        <script>
    function getColor(d) {
                
                return d > 2000? '#016c59' :
                    d > 1000? '#02818a' :
                    d > 500? '#3690c0' :
                    d > 200? '#67a9cf' :
                    d > 100? '#a6bddb' :
                    d > 50? '#d0d1e6' :
                    '#f6eff7';
                }
                function longName(shortName){
                var year =shortName.slice(4,6)
                if(shortName.slice(0,1)==="A"){
                    return "August 20"+year;
                }
                else{
                    return "Spring 20"+year;
                }

            }
            function getFeature(value){
                var semesters = ["AU__00", "SP__01", "AU__01","SP__02", "AU__02", "SP__03","AU__03", "SP__04", "AU__04", "SP__05",
                             "AU__05", "SP__06", "AU__06","SP__07", "AU__07", "SP__08","AU__08", "SP__09", "AU__09", "SP__10",
                             "AU__10", "SP__11", "AU__11","SP__12", "AU__12", "SP__13","AU__13", "SP__14", "AU__14", "SP__15",
                             "AU__15", "SP__16", "AU__16","SP__17", "AU__17"];
                var semester = semesters[value]
                return semester;
            }

            
           
            function style(feature){
                    return {
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 1,
                fillColor: getColor(feature.properties[getFeature(value)])
            }}
            function style2(feature){
                    return {
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.3,
                fillColor: '#67a9cf'
            }
                }
                
                
    

     
    function load() {
   
               //name dialog  
               var dialog = new L.control.dialog();
            //title dialog
            var dialogTitle = new L.control.dialog().setContent("<h1> OSU Enrollment</h1>");

            //legend
            var legend = L.control({position: 'bottomright'});
            legend.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'info legend'),
        grades = [0, 50, 100, 200, 500, 1000, 2000],
        labels = [];

    // loop through our density intervals and generate a label with a colored square for each interval
    for (var i = 0; i < grades.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
            grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
    }

    return div;
};
        

        legend.addTo(map);

        var slider = L.control.slider(function(value) {
            
            function style(feature){
            return {
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 1,
        fillColor: getColor(feature.properties[getFeature(value)])
    }}
    var newContent = "<h3>" + longName(getFeature(value))+"</h3>"
    
    dialog.setContent(newContent);
    //dialog.setLocation([0,0]);
    
            var ohio = new L.GeoJSON.AJAX("ohio.geojson",{style: style});
            ohio.on('mouseover', function(e){
                var info = e.layer.feature.properties['NAME'];
                    
                            });
            ohio.addTo(map);                    
        }, {
        max: 34,
        value: 1,
        step:1,
        showValue: false,
        size: '660px',
        collapsed: false,
        position: 'bottomleft',
        id: 'slider'
    });

            dialogTitle.addTo(map);
            dialogTitle.setLocation([0,0]);
            dialogTitle.setSize([220,120]);
            dialogTitle.lock();


            map.touchZoom.disable();
            map.doubleClickZoom.disable();
            map.scrollWheelZoom.disable();
            map.boxZoom.disable();
            map.dragging.disable();
            slider.addTo(map);
            dialog.addTo(map);
            dialog.lock();
            dialog.setLocation( [ 100, 0 ] );
            dialog.setSize( [ 200  , 100 ] );

  }
  var map = L.map('mapId',{zoomControl:false}).setView([40.2 ,-83],7); 

        window.onload = load;

         

        </script>
    </body>
</html>
